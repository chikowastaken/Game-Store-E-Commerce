{"ast":null,"code":"import { defaults, noop, time } from '@motionone/utils';\nimport { stopAnimation } from './stop-animation.es.js';\n\nconst createAnimation = factory => factory();\n\nconst wrapAnimationWithControls = function (animationFactory) {\n  let duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaults.duration;\n  return new Proxy({\n    animations: animationFactory.map(createAnimation).filter(Boolean),\n    duration\n  }, controls);\n};\n/**\n * TODO:\n * Currently this returns the first animation, ideally it would return\n * the first active animation.\n */\n\n\nconst getActiveAnimation = state => state.animations[0];\n\nconst controls = {\n  get: (target, key) => {\n    const activeAnimation = getActiveAnimation(target);\n\n    switch (key) {\n      case \"duration\":\n        return target.duration;\n\n      case \"currentTime\":\n        let time = (activeAnimation === null || activeAnimation === void 0 ? void 0 : activeAnimation[key]) || 0;\n        return time ? time / 1000 : 0;\n\n      case \"playbackRate\":\n      case \"playState\":\n        return activeAnimation === null || activeAnimation === void 0 ? void 0 : activeAnimation[key];\n\n      case \"finished\":\n        if (!target.finished) {\n          target.finished = Promise.all(target.animations.map(selectFinished)).catch(noop);\n        }\n\n        return target.finished;\n\n      case \"stop\":\n        return () => target.animations.forEach(animation => stopAnimation(animation));\n\n      default:\n        return typeof (activeAnimation === null || activeAnimation === void 0 ? void 0 : activeAnimation[key]) === \"undefined\" ? undefined : () => target.animations.forEach(animation => animation[key]());\n    }\n  },\n  set: (target, key, value) => {\n    switch (key) {\n      case \"currentTime\":\n        value = time.ms(value);\n\n      case \"currentTime\":\n      case \"playbackRate\":\n        for (let i = 0; i < target.animations.length; i++) {\n          target.animations[i][key] = value;\n        }\n\n        return true;\n    }\n\n    return false;\n  }\n};\n\nconst selectFinished = animation => animation.finished;\n\nexport { controls, wrapAnimationWithControls };","map":{"version":3,"names":["defaults","noop","time","stopAnimation","createAnimation","factory","wrapAnimationWithControls","animationFactory","duration","Proxy","animations","map","filter","Boolean","controls","getActiveAnimation","state","get","target","key","activeAnimation","finished","Promise","all","selectFinished","catch","forEach","animation","undefined","set","value","ms","i","length"],"sources":["/Users/giorgichikovani/Desktop/e-commerce/node_modules/@motionone/dom/dist/animate/utils/controls.es.js"],"sourcesContent":["import { defaults, noop, time } from '@motionone/utils';\nimport { stopAnimation } from './stop-animation.es.js';\n\nconst createAnimation = (factory) => factory();\nconst wrapAnimationWithControls = (animationFactory, duration = defaults.duration) => new Proxy({\n    animations: animationFactory.map(createAnimation).filter(Boolean),\n    duration,\n}, controls);\n/**\n * TODO:\n * Currently this returns the first animation, ideally it would return\n * the first active animation.\n */\nconst getActiveAnimation = (state) => state.animations[0];\nconst controls = {\n    get: (target, key) => {\n        const activeAnimation = getActiveAnimation(target);\n        switch (key) {\n            case \"duration\":\n                return target.duration;\n            case \"currentTime\":\n                let time = (activeAnimation === null || activeAnimation === void 0 ? void 0 : activeAnimation[key]) || 0;\n                return time ? time / 1000 : 0;\n            case \"playbackRate\":\n            case \"playState\":\n                return activeAnimation === null || activeAnimation === void 0 ? void 0 : activeAnimation[key];\n            case \"finished\":\n                if (!target.finished) {\n                    target.finished = Promise.all(target.animations.map(selectFinished)).catch(noop);\n                }\n                return target.finished;\n            case \"stop\":\n                return () => target.animations.forEach((animation) => stopAnimation(animation));\n            default:\n                return typeof (activeAnimation === null || activeAnimation === void 0 ? void 0 : activeAnimation[key]) === \"undefined\"\n                    ? undefined\n                    : () => target.animations.forEach((animation) => animation[key]());\n        }\n    },\n    set: (target, key, value) => {\n        switch (key) {\n            case \"currentTime\":\n                value = time.ms(value);\n            case \"currentTime\":\n            case \"playbackRate\":\n                for (let i = 0; i < target.animations.length; i++) {\n                    target.animations[i][key] = value;\n                }\n                return true;\n        }\n        return false;\n    },\n};\nconst selectFinished = (animation) => animation.finished;\n\nexport { controls, wrapAnimationWithControls };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}